---
layout: documentation
title: Creating a Pipeline in Blue Ocean
section: doc
---

:toc:
:imagesdir: /doc/book/resources

This tutorial shows you how to use Jenkins's Blue Ocean feature to create a
Pipeline that will orchestrate building a simple application.

Before starting this tutorial, it is recommended that you run through at least
one of the initial set of tutorials from the link:..[Tutorials overview] page
first to familiarize yourself with CI/CD concepts and how they are implemented
in Jenkins.

This tutorial uses the same application that the
link:../building-a-node-js-and-react-app-with-npm[Using Jenkins to build a
Node.js and React application with npm] tutorial is based on. Therefore, you'll
be building the same application, but this time completely through Blue Ocean.
Since Blue Ocean provides a simplified Git-handling experience, you'll be
interacting directly with the repository on GitHub (as opposed to a local clone
of this repository).

*Duration:* This tutorial takes 20-40 minutes to complete (assuming you've
already met the <<prerequisites,prerequisites>> below). The exact duration will
depend on the speed of your machine and whether or not you've already
<<download-and-run-jenkins-in-docker,downloaded and run Jenkins in Docker>> from
link:..[another introductory tutorial].

You can stop this tutorial at any point in time and continue from where you left
off.

include::doc/tutorials/_prerequisites.adoc[]

include::doc/tutorials/_download-and-run-jenkins-in-docker.adoc[]


=== Fork the sample repository on GitHub

Fork the simple "Welcome to React" Node.js and React application on GitHub into
your own GitHub account.

. Ensure you are signed in to your GitHub account. If you don't yet have a
  GitHub account, sign up for a free one on the https://github.com/[GitHub
  website].
. Fork the
  https://github.com/gilesgas/creating-a-pipeline-in-blue-ocean[`creating-a-pipeline-in-blue-ocean`]
  on GitHub into your local GitHub account. If you need help with this process,
  refer to the https://help.github.com/articles/fork-a-repo/[Fork A Repo]
  documentation on the GitHub website for more information. +
  *Note:* This is a different repository to the one used in the
  link:../building-a-node-js-and-react-app-with-npm[Using Jenkins to build a
  Node.js and React application with npm] tutorial. Although these repositories
  contain the same application code, ensure you fork and use the correct one
  before continuing on.


=== Create your Pipeline project in Blue Ocean

. Ensure you have accessed Jenkins's Blue Ocean interface. To do this, ensure
  you:
* have browsed to `http://localhost:8080/blue` and are logged in +
  or
* have browsed to `http://localhost:8080/`, are logged in and have clicked *Open
  Blue Ocean* on the left.
. In the *Welcome to Jenkins* box at the center of the Blue Ocean interface,
  click *Create a new Pipeline*. +
  *Note:* If you don't see this box, click *New Pipeline* at the top right.
. In *Where do you store your code?*, click *GitHub*.
. In *Connect to GitHub*, click *Create an access key here*. This opens GitHub
  in a new browser tab. +
  *Note:* If you previously configured Blue Ocean to connect to GitHub using a
  personal access token, then Blue Ocean will take you directly to step 9
  <<choose-github-account,below>>.
. In the new tab, sign in to your GitHub account (if necessary) and on the
  GitHub *New Personal Access Token* page, specify a brief *Token description*
  for your GitHub access token (e.g. `Create Pipeline in Blue Ocean
  Tutorial`). +
  *Note:* An access token is usually an alphanumeric string that respresents
  your GitHub account along with permissions to access various features and
  areas of this account. These tokens can be used by other applications (like
  Jenkins) to access areas of your GitHub account on your behalf.
. Scroll down to the end of the page (leaving all other *Select scopes* options
  with their default settings) and click *Generate token*.
. On the resulting *Personal access tokens* page, copy your newly generated
  access token.
. Back in Blue Ocean, paste the access token into the *Your GitHub access token*
  field and click *Connect*. +
[.boxshadow]
image:tutorials/pipeline-in-blueocean-01-connecting-to-github.png[alt="Connecting
to GitHub",width=80%] +
  [[choose-github-account]]Jenkins will now have access to your GitHub account (provided by your access
  token).
. In *Which organization does the repository belong
  to?*, click your GitHub account (where you forked the repository
  <<fork-the-sample-repository-on-github,above>>).
. In *Choose a repository*, click your forked repository
  *creating-a-pipeline-in-blue-ocean*.
. Click *Create Pipeline*. +
  Blue Ocean will detect that there is no Jenkinsfile at the root level of the
  repository's `master` branch and proceed to help you create one. +
  *Note:* Under the hood, a Pipeline project created through Blue Ocean is
  actually "multibranch Pipeline". Therefore, Jenkins looks for the presence of
  at least one Jenkinsfile in any branch of your repository.


=== Create your initial Pipeline

. Following on from creating your Pipeline project
  (<<create-your-pipeline-project-in-blue-ocean,above>>), on the Pipeline
  editor: +
[.boxshadow]
image:tutorials/pipeline-in-blueocean-11-initial-pipeline-editor-page.png[alt="Initial
to GitHub",width=100%] +
  select *docker* from the *Agent* dropdown in the *Pipeline Settings* panel.
. In the *Image* and *Args* fields that appear, specify `node:6-alpine` and
  `-p 3000:3000` respectively. +
[.boxshadow]
image:tutorials/pipeline-in-blueocean-12-agent-section.png[alt="Configuring the
agent",width=50%] +
  For an explanation of these values, refer to annotations *1* and *2* of the
  Declarative Pipeline at
  link:../building-a-node-js-and-react-app-with-npm/#create-your-initial-pipeline-as-a-jenkinsfile[``Create
  your initial Pipeline...'' section of the building a Node.js and React
  application] tutorial.
. Back in the main Pipeline editor, click the *+*
  icon: +
[.boxshadow]
image:tutorials/pipeline-in-blueocean-13-add-build-stage.png[alt="Add 'Build'
stage",width=30%] +
  which opens the stage panel on the right.
. In this panel, type `Build` in the *Name your stage* field and then click the
  *Add Step* button below: +
[.boxshadow]
image:tutorials/pipeline-in-blueocean-14-adding-the-build-stage.png[alt="Adding
the Build stage",width=50%] +
  which opens the *Choose step type* panel.
. In this panel, click *Shell Script* near the top of the list to select that
  option, which will open the *Build / Shell Script* panel, where you can enter
  this step's values.
[.boxshadow]
image:tutorials/pipeline-in-blueocean-15-selecting-a-step.png[alt="Selecting a
step",width=50%] +
  *Note:* The most commonly used steps appear closest to the top of this list.
  To find other steps further down this list, you can filter this steps list
  using the *Find steps by name* option.
. In the *Build / Shell Script* panel, specify `npm
  install`:
[.boxshadow]
image:tutorials/pipeline-in-blueocean-16-specifying-a-shell-step-value.png[alt="Specifying
a shell step value",width=80%] +
  and then click the top-left back arrow icon
  image:tutorials/pipeline-in-blueocean-16a-return-from-step-icon.png[alt="Return
  from step icon",width=3%] to return to the main Pipeline editor. +
  *Note:* For an explanation of this step, refer to annotation *4* of the
  Declarative Pipeline at
  link:../building-a-node-js-and-react-app-with-npm/#create-your-initial-pipeline-as-a-jenkinsfile[``Create
  your initial Pipeline...'' section of the building a Node.js and React
  application] tutorial.
. Click the *Save* button at the top right to begin saving your new Pipeline
  with its "Build" stage.
. In the *Save Pipeline* dialog box, specify the commit message in the
  *Description* field (e.g. `Add initial Pipeline (Jenkinsfile)`).
[.boxshadow]
image:tutorials/pipeline-in-blueocean-18-save-pipeline-dialog-box.png[alt="Save
Pipeline dialog box",width=70%] +
. Leaving all other options as is, click *Save & run* and Jenkins will proceed
  to build your Pipeline. +
  *Note:* You may need to wait several minutes for this first run to complete.
  During this time, Jenkins does the following:
.. Commits your Pipeline as a `Jenkinsfile` to the only branch (i.e. `master`)
   of your repository.
.. Initially queues the project to be built on the agent.
.. Downloads the Node Docker image and runs it in a container on Docker.
.. Executes the `Build` stage (defined in the `Jenkinsfile`) on the Node
   container. (During this time, `npm` will download many dependencies necessary
   to run your Node.js and React application, which will ultimately be stored in
   the local `node_modules` directory within the Jenkins home directory).
+
[.boxshadow]
image:tutorials/pipeline-in-blueocean-19-initial-pipeline-downloading-npm-dependencies.png[alt="Downloading
'npm' dependencies",width=100%]

+
The Blue Ocean interface turns green if Jenkins built your application
successfully.
[.boxshadow]
image:tutorials/pipeline-in-blueocean-19a-initial-pipeline-runs-successfully.png[alt="Initial
Pipeline runs successfully",width=100%]
. Click the *X* at the top-right to return to the main Blue Ocean interface.
+
[.boxshadow]
image:tutorials/pipeline-in-blueocean-19b-main-blue-ocean-interface.png[alt="Main
Blue Ocean interface",width=100%] +
  *Note:* Before continuing on, you can check that Jenkins has created a
  `Jenkinsfile` for you at the root of your forked GitHub repository (in the
  repository's sole `master` branch).


=== Adding a test stage to your Pipeline

. From the main Blue Ocean interface, click *Branches* at the top-right to
  access your respository's branches page, where you can access the `master`
  branch: +
[.boxshadow]
image:tutorials/pipeline-in-blueocean-21-repository-branches-page.png[alt="Repository
branches page",width=100%]
. Click the "Edit Pipeline" icon
  image:tutorials/pipeline-in-blueocean-21a-edit-pipeline-on-branch.png[alt="Edit
  Pipeline on branch",width=3%]
  to open the Pipeline editor for the `master` branch. +
. In the main Pipeline editor, click the *+* icon to the right of the *Build*
  stage you created <<create-your-initial-pipeline,above>>: +
[.boxshadow]
image:tutorials/pipeline-in-blueocean-22-add-test-stage.png[alt="Add 'Test'
stage",width=45%] +
  which opens the stage panel on the right.
. In this panel, type `Test` in the *Name your stage* field and then click the
  *Add Step* button below to open the *Choose step type* panel.
. In this panel, click *Shell Script* near the top of the list.
. In the resulting *Test / Shell Script* panel, specify
  `./jenkins/scripts/test.sh` and then click the top-left back arrow icon
  image:tutorials/pipeline-in-blueocean-16a-return-from-step-icon.png[alt="Return
  from step icon",width=3%] to return to the main Pipeline editor. +
. At the lower-right of the panel, click *Settings* to reveal this section of
  the panel.
. Click the *+* icon at the right of the *Environment* heading (for which you'll
  configure an environment directive).
. In the *Name* and *Value* fields that appear, specify `CI` and `true`,
  respectively.


=== Wrapping up

Well done! You've just completed building a simple Node.js and React application
using npm in Jenkins!

The "build", "test" and "deliver" stages you created above are the basis for
building more complex Node.js and React applications in Jenkins, as well as
Node.js and React applications that integrate with other technology stacks.

Because Jenkins is extremely extensible, it can be modified and configured to
handle practically any aspect of build orchestration and automation.

To learn more about what Jenkins can do, check out:

* The link:/doc/tutorials[Tutorials overview] page for other introductory
  tutorials.
* The link:/doc/book[User Handbook] for more detailed information about using
  Jenkins, such as link:/doc/book/pipeline[Pipelines] (in particular
  link:/doc/book/pipeline/syntax[Pipeline syntax]) and the
  link:/doc/book/blueocean[Blue Ocean] interface.
* The link:/node[Jenkins blog] for the latest events, other tutorials and
  updates.

include::doc/_feedback-footer.adoc[]
